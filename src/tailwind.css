@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================
   ROOT VARIABLES & GLOBAL OVERRIDES
========================================================== */
:root {
  --sibol-green: #2E523A;
  --header-height-lg: 72px;
  --header-height-md: 68px;
  --header-height-sm: 64px;
  --header-height-xs: 58px;

  /* From remembered global root */
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  color: #213547;
  background-color: #ffffff;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html {
  scroll-behavior: smooth;
}

body {
  @apply font-sans bg-[#F7F9F5] text-[#333] min-w-[320px] min-h-screen flex place-items-center;
}

html, body, #root {
  width: 100%;
  height: auto !important;
  min-height: 100vh;
  margin: 0;
  padding: 0;
  overflow-y: auto !important;
}

#root {
  max-width: none;
  padding: 0;
}

/* Links */
a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover { color: #747bff; }

/* Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: #C6D1C6;
  border-radius: 8px;
}
::-webkit-scrollbar-thumb:hover { background: #9FB59F; }

/* Buttons */
button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  background-color: transparent;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:focus, button:focus-visible { outline: none; box-shadow: none; }

/* Inputs */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
textarea,
select {
  background-color: white !important;
  color: #111827 !important;
}

input::placeholder, textarea::placeholder {
  color: #9ca3af !important;
  opacity: 1;
}

input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px white inset !important;
  -webkit-text-fill-color: #111827 !important;
}

/* Leaflet custom */
.leaflet-div-icon-transparent { background: transparent; border: none; }

/* ==========================================================
   COMPONENTS 
========================================================== */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 font-sans;
  }
  .btn-primary { @apply bg-sibol-green text-white hover:bg-green-700 focus-visible:ring-sibol-green; }
  .btn-outline { @apply border border-green-100 bg-white text-sibol-green hover:bg-green-50 focus-visible:ring-sibol-green; }
  .btn-ghost { @apply bg-transparent text-sibol-green hover:bg-green-50 focus-visible:ring-sibol-green; }

  .chip { @apply inline-flex items-center justify-center text-[11px] font-medium px-2 py-1 rounded-full font-sans; }
  .chip-rose { @apply bg-white text-rose-700; }
  .badge { @apply px-3 py-1 rounded-md text-xs font-medium font-sans; }
  .badge-critical { @apply bg-[#E9744B] text-white; }
  .badge-high { @apply bg-[#E4A24B] text-white; }
  .badge-medium { @apply bg-[#D9C94F] text-[#4A4A4A]; }
  .badge-low, .badge-active { @apply bg-[#A3CFA0] text-[#2B2B2B]; }
  .badge-inactive { @apply bg-[#C0C6C1] text-[#2B2B2B]; }

  .tab { @apply bg-sibol-green text-white font-medium text-base px-6 py-2 rounded-none border-none shadow-none opacity-90 hover:opacity-100 font-sans; }
  .tab-active { @apply underline underline-offset-4 font-semibold; }

  nav[role="tablist"] button { @apply bg-transparent shadow-none outline-none border-none font-sans; }
  nav[role="tablist"] button:hover,
  nav[role="tablist"] button:active,
  nav[role="tablist"] button:focus { @apply bg-transparent outline-none border-none shadow-none; }
  nav[role="tablist"] button:focus-visible { @apply underline font-semibold; }

  .subheader { @apply bg-white/90 backdrop-blur border-b border-green-50; }

  .card { @apply bg-white border border-green-100 rounded-md shadow-sm p-4; }

  .table-header { @apply font-semibold bg-[#DDE8D5]; }
  .table-row { @apply transition-colors duration-150 ease-in-out; }
  .table-row:hover { @apply bg-[#F1F5EA]; }

  .filter-box { @apply bg-white border border-green-100 rounded-md shadow-sm p-4; }

  input, textarea, select {
    @apply border border-green-100 rounded-md px-3 py-2 bg-white outline-none font-sans;
  }
  input:focus, textarea:focus, select:focus {
    border-color: var(--sibol-green);
    box-shadow: 0 0 0 2px rgba(46, 82, 58, 0.18);
  }

  /* HEADER */
  .header {
    @apply fixed top-0 left-0 right-0 z-50 flex justify-center items-center font-sans w-full;
    background-color: #355842;
    padding: 16px 40px;
    min-height: var(--header-height-lg);
  }

  .nav { @apply w-full max-w-[1200px] flex justify-between items-center gap-[24px]; }
  .nav-logo { @apply h-8 w-auto; }
  .menu-toggle { @apply hidden flex-col justify-center items-center gap-1.5 w-10 h-10 rounded-full border border-white/25 bg-transparent cursor-pointer transition; }
  .menu-toggle span { @apply block w-[18px] h-[2px] bg-white rounded-full transition; }

  .nav-links { @apply flex gap-[56px] list-none m-0 p-0; }
  .nav-icons { @apply flex items-center gap-[28px]; }
  .nav-menu { @apply flex items-center gap-[48px]; }

  .nav-link {
    @apply text-[#d1d1d1] text-lg font-normal no-underline transition-colors font-sans;
  }
  .nav-link:hover { @apply text-white; }
  .nav-link.active { @apply font-normal text-white border-b-2 border-white pb-1; }

  .icon { @apply w-6 h-6 text-white cursor-pointer transition-opacity; }
  .icon:hover { @apply opacity-80; }

  /* RESPONSIVE */
  @media (max-width: 1024px) {
    :root { --header-height: var(--header-height-md); }
    .header { padding: 14px 34px; }
    .nav-links { @apply gap-3 text-[17px]; }
    .nav-icons { @apply gap-[26px]; }
    .nav-logo { @apply h-7; }
    .icon { @apply w-5 h-5; }
    .nav-menu { @apply gap-[10px]; }
  }

  @media (max-width: 768px) {
    :root { --header-height: var(--header-height-sm); }
    .nav { @apply flex-wrap gap-4 justify-between; }
    .menu-toggle { @apply flex; }
    .nav-menu { @apply w-full bg-[#2c4b31] rounded-xl flex-col gap-4 p-3 hidden; animation: slideDown 0.2s ease forwards; }
    .nav-menu.open { @apply flex; }
    .nav-links { @apply w-full flex-col items-stretch gap-3 text-sm; }
    .nav-links li { @apply w-full; }
    .nav-link { @apply block px-3 py-2 rounded-md bg-white/5 transition; }
    .nav-link:hover, .nav-link.active { @apply bg-green-200/20 text-white border-b-0; }
    .nav-icons { @apply w-full justify-center gap-12; }
    .nav-logo { @apply h-6; }
  }

  @media (max-width: 480px) {
    :root { --header-height: var(--header-height-xs); }
    .header { padding: 12px 22px; }
    .nav { @apply flex-wrap gap-3; }
    .nav-links { @apply w-full flex-col gap-2 text-xs; }
    .nav-icons { @apply w-full justify-center gap-10; }
    .nav-logo { @apply h-6; }
  }

  /* Animation */
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* typing indicator jump */
  @keyframes sibol-jump {
    0% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
    100% { transform: translateY(0); }
  }

  /* Cloud animations - Left to right */
  @keyframes cloudLeftToRight {
    0% { transform: translateX(0); }
    100% { transform: translateX(clamp(300px, 50vw, 600px)); }
  }

  /* Cloud animations - Right to left */
  @keyframes cloudRightToLeft {
    0% { transform: translateX(0); }
    100% { transform: translateX(clamp(-300px, -50vw, -600px)); }
  }

  .typing-dot { width: 9px; height: 8px; border-radius: 9999px; display: inline-block; margin-right: 8px; }

  .typing-dot.-green { background-color: #AFC8AD; animation: sibol-jump 800ms ease-in-out infinite; }
  .typing-dot.-grey { background-color: #DED9D9; animation: sibol-jump 800ms ease-in-out infinite; }

  /* Cloud animation utilities */
  .animate-cloudSlow {
    animation: cloudLeftToRight 8s ease-in-out infinite;
  }

  .animate-cloudReverse {
    animation: cloudRightToLeft 9s ease-in-out infinite;
  }

  .animate-cloudSlowBottom {
    animation: cloudLeftToRight 9s ease-in-out infinite;
  }

  .animate-cloudReverseBottom {
    animation: cloudRightToLeft 8s ease-in-out infinite;
  }
}

/* Date Picker Green Theme - Add to your tailwind.css */
@layer components {
  /* ... your existing components ... */

  /* Date Picker Styling */
  input[type="date"].date-picker-green::-webkit-calendar-picker-indicator {
    filter: invert(27%) sepia(20%) saturate(1500%) hue-rotate(95deg) brightness(95%) contrast(90%);
  }

  /* Style for the selected date in calendar */
  input[type="date"]:focus::-webkit-datetime-edit {
    background-color: transparent;
  }
}

/* Calendar day buttons - override global button styles */
.rdp button {
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* React Day Picker v9 - override global button styles */
.rdp-root button,
.rdp-root .rdp-button,
.rdp-root .rdp-day,
.rdp-root .rdp-nav button,
.rdp-button,
.rdp-day,
.rdp-chevron,
[data-slot="day"],
[data-slot="button"] {
  all: unset !important;
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
  cursor: pointer !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box !important;
}

/* ====================================
   REACT DAY PICKER v9 - Green Theme
==================================== */

/* Reset all button styles inside calendar */
.rdp-root *,
.rdp * {
  box-sizing: border-box;
}

.rdp-root button,
.rdp button {
  all: unset;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Calendar container */
.rdp-root,
.rdp {
  --rdp-cell-size: 40px;
  --rdp-accent-color: #355842;
  --rdp-background-color: #D9EBD9;
  font-family: system-ui, -apple-system, sans-serif;
  padding: 1rem !important;
}

/* Month grid layout */
.rdp-month {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Month caption */
.rdp-month_caption,
.rdp-caption_label {
  font-size: 1rem;
  font-weight: 600;
  color: #2E523A;
  padding: 0.5rem 0;
}

/* Navigation buttons */
.rdp-nav button,
.rdp-button_previous,
.rdp-button_next {
  width: 32px !important;
  height: 32px !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  border-radius: 8px !important;
  color: #2E523A !important;
  opacity: 0.7;
  transition: all 0.15s ease;
}

.rdp-nav button:hover,
.rdp-button_previous:hover,
.rdp-button_next:hover {
  background: #D9EBD9 !important;
  opacity: 1;
}

/* Weekdays row - FIXED ALIGNMENT */
.rdp-weekdays {
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  width: 100% !important;
  margin-bottom: 0.5rem !important;
  gap: 4px !important;
}

/* Weekday headers */
.rdp-weekday {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 40px !important;
  height: 32px !important;
  font-size: 0.75rem !important;
  font-weight: 500 !important;
  color: #6B7280 !important;
  text-transform: uppercase !important;
  padding: 0 !important;
}

/* Weeks container */
.rdp-weeks {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Week row - grid layout matching weekdays */
.rdp-week {
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  width: 100% !important;
  gap: 4px !important;
}

/* Day cells */
.rdp-day {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 40px !important;
  height: 40px !important;
  padding: 0 !important;
  margin: 0 !important;
  font-size: 0.875rem !important;
  font-weight: 400 !important;
  color: #374151 !important;
  background: transparent !important;
  border: none !important;
  border-radius: 10px !important;
  cursor: pointer !important;
  transition: all 0.15s ease !important;
}

.rdp-day:hover {
  background: #E8F5E9 !important;
}

/* Day button inside */
.rdp-day_button {
  all: unset !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
  border-radius: 10px !important;
  cursor: pointer !important;
}

/* Selected day */
.rdp-selected .rdp-day_button,
.rdp-day.rdp-selected,
[data-selected="true"],
[data-selected="true"] button {
  background: #355842 !important;
  color: white !important;
  font-weight: 600 !important;
  border-radius: 10px !important;
}

/* Today */
.rdp-today:not(.rdp-selected),
.rdp-today:not(.rdp-selected) .rdp-day_button,
[data-today="true"]:not([data-selected="true"]) {
  background: #D9EBD9 !important;
  color: #2E523A !important;
  font-weight: 600 !important;
  border-radius: 10px !important;
}

/* Outside days (other months) */
.rdp-outside,
.rdp-outside .rdp-day_button,
[data-outside="true"] {
  color: #D1D5DB !important;
  opacity: 0.5 !important;
}

/* Disabled days */
.rdp-disabled,
.rdp-disabled .rdp-day_button {
  color: #D1D5DB !important;
  cursor: not-allowed !important;
  opacity: 0.3 !important;
}

/* Remove any remaining dark backgrounds */
.rdp-months,
.rdp-month,
.rdp-weeks,
.rdp-week,
.rdp-weekdays {
  background: transparent !important;
}